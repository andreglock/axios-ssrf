import { Controller, Post, Inject, Body } from '@nestjs/common';
import { VulnerableService } from './vulnerable.service';
import { LoggingTool } from '../tools/logging/logging.tool';
import { GetMoviesBySearchDto } from './get-movies-by-search.dto';

@Controller('search')
export class VulnerableController {
  constructor(
    private readonly vulnerableService: VulnerableService,
    @Inject(LoggingTool) private readonly loggingTool: LoggingTool,
  ) {
    this.loggingTool.setContext(VulnerableController.name);
  }

  @Post()
  getMoviesBySearch(@Body() body: GetMoviesBySearchDto) {
    this.loggingTool.debug(`Called search`);
    return this.vulnerableService.getMoviesBySearch(body);
  }
}
